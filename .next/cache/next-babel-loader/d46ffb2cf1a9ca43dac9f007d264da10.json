{"ast":null,"code":"import axios from '../../components/Requests/FirebaseInstance';\nexport var SET_GYMS = 'gyms:setGyms';\nexport var GYM_BOOKED = 'gym:gymBooked';\nexport var SHOW_ERROR = 'gyms:showError';\nexport var GYM_TIMES_BOOKED = 'gym:timesBooked';\nexport var USER_TIMES_BOOKED = 'user:timesBooked';\nexport var setGymData = function setGymData(gyms) {\n  return {\n    type: SET_GYMS,\n    payload: {\n      gyms: gyms\n    }\n  };\n};\nexport var bookGym = function bookGym(gym) {\n  return {\n    type: GYM_BOOKED,\n    payload: {\n      gym: gym\n    }\n  };\n};\nexport var showError = function showError() {\n  return {\n    type: SHOW_ERROR,\n    payload: {\n      error: 'Error when fetching gyms'\n    }\n  };\n};\nexport var setGymBookedTimes = function setGymBookedTimes(bookedTimes) {\n  return {\n    type: GYM_TIMES_BOOKED,\n    payload: {\n      bookedTimes: bookedTimes\n    }\n  };\n};\nexport var setUserBookedTimes = function setUserBookedTimes(bookedTimes) {\n  return {\n    type: USER_TIMES_BOOKED,\n    payload: {\n      bookedTimes: bookedTimes\n    }\n  };\n};\nexport var submitGymBooking = function submitGymBooking(postData) {\n  return function (dispatch) {\n    axios.post('/booked_logs', {\n      fields: postData\n    }).then(function (response) {}, function (error) {\n      console.log(error);\n    });\n  };\n};\nexport var getBookedTimes = function getBookedTimes(ref, type) {\n  return function (dispatch) {\n    axios.get('/booked_logs').then(function (response) {\n      var bookedDaysArray = [];\n\n      if (response.data.documents) {\n        if (type === 'gym') {\n          response.data.documents.forEach(function (bookedTimes) {\n            if (bookedTimes.fields.gym_id.stringValue === ref) {\n              bookedDaysArray.push(bookedTimes.fields.selected_date.stringValue);\n            }\n          });\n          dispatch(setGymBookedTimes(bookedDaysArray));\n        } else if (type === 'user') {\n          response.data.documents.forEach(function (bookedTimes) {\n            if (bookedTimes.fields.user_email.stringValue === ref) {\n              bookedDaysArray.push({\n                day: bookedTimes.fields.selected_date.stringValue,\n                start_time: bookedTimes.fields.selected_start_time.stringValue,\n                end_time: bookedTimes.fields.selected_end_time.stringValue,\n                gym_name: bookedTimes.fields.gym_name.stringValue,\n                gym_location: bookedTimes.fields.gym_location.stringValue,\n                modified: bookedTimes.fields.modified.stringValue\n              });\n            }\n          });\n          dispatch(setUserBookedTimes(bookedDaysArray));\n        }\n      }\n    }, function (error) {\n      dispatch(showError());\n    });\n  };\n};\nexport var fetchGymsRequest = function fetchGymsRequest() {\n  return function (dispatch) {\n    axios.get('/gyms').then(function (response) {\n      dispatch(setGymData(response.data.documents));\n    }, function (error) {\n      dispatch(showError());\n    });\n  };\n};","map":null,"metadata":{},"sourceType":"module"}