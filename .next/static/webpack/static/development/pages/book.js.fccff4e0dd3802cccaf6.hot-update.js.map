{"version":3,"file":"static/webpack/static/development/pages/book.js.fccff4e0dd3802cccaf6.hot-update.js","sources":["webpack:///./pages/book.js"],"sourcesContent":["import Layout from '../components/Layout'\nimport { createSelector } from 'reselect'\nimport { connect } from 'react-redux'\nimport { bookGym, fetchGymsRequest, submitGymBooking, getBookedTimes } from '../redux/actions/gym-actions.js'\nimport {authListener} from '../redux/actions/user-actions'\nimport Log from '../components/Log'\nimport Login from '../components/Login'\nimport Modal from '../components/Modal'\nimport Router from 'next/router'\n\n\nclass Book extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      isModalOpen: false,\n      selectedGym: {}\n    }\n  }\n\n  componentDidMount() {\n    if (!this.props.onAuthListener()) {\n      Router.push('/')\n    }\n    console.log(this.props.onAuthListener())\n    this.props.onFetchGymsRequest();\n  }\n\n  openModal = () => {\n    this.setState({\n      isModalOpen: !this.state.isModalOpen\n    })\n    \n  }\n\n  render() {\n  \n    return (\n      <div>\n        <p>Booking Page</p>\n        {this.props.user ?\n          this.props.gyms &&\n            this.props.gyms.map((gym, index) => {\n              return (\n                <Log \n                    data={gym}\n                    type='booking'\n                    key={gym.name}\n                    openModal={this.openModal}\n                    chooseGym={this.props.onBookGym}\n                    getBookedTimes={this.props.onGetBookedTimes}\n                  />\n              )\n\n            })\n        :\n        <Login />\n        }\n        {this.state.isModalOpen && <Modal modalState={this.state.isModalOpen} modalAction={this.openModal} data={this.props.gym}\n        user={this.props.user}\n        submitGymBooking={this.props.onSubmitGymBooking}\n        bookedTimes={this.props.bookedTimes} type=\"booking\"/>}\n        <style jsx global>{`\n          .bottomNav {\n            display: ${this.props.user ? null : 'none'}\n          }\n        `}\n        </style>\n      </div>\n    )\n  }\n\n}\n\nconst gymSelector = createSelector(\n  state => state.gyms,\n  gyms => gyms\n)\n\nconst bookedGymSelector = createSelector(\n  state => state.gym,\n  gym => gym\n)\n\nconst userSelector = createSelector(\n  state => state.user,\n  user => user\n)\n\nconst bookedTimesSelector = createSelector(\n  state => state.bookedTimes,\n  bookedTimes => bookedTimes\n)\n\nconst mapStateToProps = createSelector(\n  gymSelector,\n  bookedGymSelector,\n  userSelector,\n  bookedTimesSelector,\n  (gyms, gym, user, bookedTimes) => ({\n    gyms,\n    gym,\n    user,\n    bookedTimes\n  })\n);\n\nconst mapActionsToProps = {\n  onBookGym: bookGym,\n  onFetchGymsRequest: fetchGymsRequest,\n  onSubmitGymBooking: submitGymBooking,\n  onGetBookedTimes: getBookedTimes,\n  onAuthListener: authListener\n}\n\nexport default Layout(connect(mapStateToProps, mapActionsToProps)(Book));"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;AAEA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAiBA;AACA;AADA;AAIA;AACA;AApBA;AACA;AACA;AAFA;AAFA;AAMA;AACA;;;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;;;AASA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AApBA;AAAA;AAAA;AAAA;AAgCA;;;;AA5DA;AACA;AA+DA;AACA;AAAA;AACA;AAAA;AAGA;AACA;AAAA;AACA;AAAA;AAGA;AACA;AAAA;AACA;AAAA;AAGA;AACA;AAAA;AACA;AAAA;AAGA;AAKA;AACA;AACA;AACA;AACA;AAJA;AAAA;AAQA;AACA;AACA;AACA;AACA;AACA;AALA;AAQA;;;;A","sourceRoot":""}